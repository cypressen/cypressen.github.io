<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta http-equiv="X-UA-COMPATIBLE" content="IE=edge,chrome=1"><meta name="renderer" content="webkit"><link rel="icon" type="image/ico" sizes="32x32" href="/assets/favicon.ico"><link rel="apple-touch-icon" sizes="180x180" href="/assets/apple-touch-icon.png"><meta name="google-site-verification" content="RPaIzPiVnF1_SrESEzzzdNdJg_oYfT0t9r7A4QU1iV4"><link rel="alternate" href="/rss.xml" title="サイプレス" type="application/rss+xml"><link rel="alternate" href="/atom.xml" title="サイプレス" type="application/atom+xml"><link rel="alternate" type="application/json" title="サイプレス" href="https://cypressen.github.io/feed.json"><link rel="preconnect" href="https://lf9-cdn-tos.bytecdntp.com"><link rel="preconnect" href="https://at.alicdn.com"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://unpkg.com"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Mulish:400,400italic,700,700italic%7CFredericka%20the%20Great:400,400italic,700,700italic%7CNoto%20Serif%20JP:400,400italic,700,700italic%7CNoto%20Serif%20SC:400,400italic,700,700italic%7CInconsolata:400,400italic,700,700italic&amp;display=swap&amp;subset=latin,latin-ext" media="none" onload="this.media='all'"><link rel="stylesheet" href="/css/app.css?v=0.4.2"><link rel="modulepreload" href="/js/chunk-DOULWTAQ.js"><link rel="modulepreload" href="/js/chunk-GX7YDKHH.js"><link rel="modulepreload" href="/js/chunk-KYUUYBZH.js"><link rel="modulepreload" href="/js/chunk-QGM62ATE.js"><link rel="modulepreload" href="/js/chunk-QZYERO2P.js"><link rel="modulepreload" href="/js/comments-I7MRCHQB.js"><link rel="modulepreload" href="/js/index.esm-VHAZSVU5.js"><link rel="modulepreload" href="/js/post-A5PPTEXL.js"><link rel="modulepreload" href="/js/quicklink-TSXH5ZQW.js"><link rel="modulepreload" href="/js/search-R7I6QHOD.js"><link rel="modulepreload" href="/js/siteInit.js"><link rel="stylesheet" href="https://npm.webcache.cn/@waline/client@3.0.0-alpha.11/dist/waline.css" media="none" onload="this.media='all'"><link rel="preload" href="h" as="image" fetchpriority="high"><link rel="preload" href="t" as="image" fetchpriority="high"><link rel="preload" href="t" as="image" fetchpriority="high"><link rel="preload" href="p" as="image" fetchpriority="high"><link rel="preload" href="s" as="image" fetchpriority="high"><link rel="preload" href=":" as="image" fetchpriority="high"><link rel="preload" href="/" as="image" fetchpriority="high"><link rel="preload" href="/" as="image" fetchpriority="high"><link rel="preload" href="o" as="image" fetchpriority="high"><link rel="preload" href="o" as="image" fetchpriority="high"><link rel="preload" href="o" as="image" fetchpriority="high"><link rel="preload" href="." as="image" fetchpriority="high"><link rel="preload" href="0" as="image" fetchpriority="high"><link rel="preload" href="x" as="image" fetchpriority="high"><link rel="preload" href="0" as="image" fetchpriority="high"><link rel="preload" href="." as="image" fetchpriority="high"><link rel="preload" href="o" as="image" fetchpriority="high"><link rel="preload" href="o" as="image" fetchpriority="high"><link rel="preload" href="o" as="image" fetchpriority="high"><link rel="preload" href="/" as="image" fetchpriority="high"><link rel="preload" href="2" as="image" fetchpriority="high"><link rel="preload" href="0" as="image" fetchpriority="high"><link rel="preload" href="2" as="image" fetchpriority="high"><link rel="preload" href="4" as="image" fetchpriority="high"><link rel="preload" href="/" as="image" fetchpriority="high"><link rel="preload" href="0" as="image" fetchpriority="high"><link rel="preload" href="5" as="image" fetchpriority="high"><link rel="preload" href="/" as="image" fetchpriority="high"><link rel="preload" href="1" as="image" fetchpriority="high"><link rel="preload" href="2" as="image" fetchpriority="high"><link rel="preload" href="/" as="image" fetchpriority="high"><link rel="preload" href="O" as="image" fetchpriority="high"><link rel="preload" href="J" as="image" fetchpriority="high"><link rel="preload" href="b" as="image" fetchpriority="high"><link rel="preload" href="u" as="image" fetchpriority="high"><link rel="preload" href="6" as="image" fetchpriority="high"><link rel="preload" href="i" as="image" fetchpriority="high"><link rel="preload" href="." as="image" fetchpriority="high"><link rel="preload" href="j" as="image" fetchpriority="high"><link rel="preload" href="p" as="image" fetchpriority="high"><link rel="preload" href="g" as="image" fetchpriority="high"><meta name="keywords" content="java,"><link rel="canonical" href="https://cypressen.github.io/CS/CS61B/CS61B-SP21-Week7-report/"><title>[CS61B_SP21]Week7_report</title><meta name="generator" content="Hexo 7.0.0"></head><body itemscope="" itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope="" itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">[CS61B_SP21]Week7_report</h1><div class="meta"><span class="item" title="创建时间：2024-05-02 21:52:55"><span class="icon"><i class="ic i-calendar"></i></span><span class="text">发表于</span><time itemprop="dateCreated datePublished" datetime="2024-05-02T21:52:55+08:00">2024-05-02</time></span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i></span><span class="text">本文字数</span><span>4.2k</span><span class="text">字</span></span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i></span><span class="text">阅读时长</span><span>4 分钟</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span><span class="line"></span><span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">cypress</a></li></ul><ul class="right" id="rightNav"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div class="pjax" id="imgs"><img src="https://ooo.0x0.ooo/2024/05/12/OJbu6i.jpg" loading="eager" decoding="async" fetchpriority="high" alt="サイプレス"></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"></path></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"></use><use xlink:href="#gentle-wave" x="48" y="3"></use><use xlink:href="#gentle-wave" x="48" y="5"></use><use xlink:href="#gentle-wave" x="48" y="7"></use></g></svg></div><main><div class="inner"><div class="pjax" id="main"><div class="article wrap"><div class="breadcrumb" itemlistelement="" itemscope="" itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i><span><a href="/">首页</a></span><i class="ic i-angle-right"></i><span itemprop="itemListElement" itemscope="itemscope" itemtype="https://schema.org/ListItem"><a href="/categories/CS/" itemprop="item" rel="index" title="分类于CS"><span itemprop="name">CS<meta itemprop="position" content="0"></span></a></span><i class="ic i-angle-right"></i><span class="current" itemprop="itemListElement" itemscope="itemscope" itemtype="https://schema.org/ListItem"><a href="/categories/CS/CS61B/" itemprop="item" rel="index" title="分类于CS61B"><span itemprop="name">CS61B<meta itemprop="position" content="1"></span></a></span></div><article class="post block" itemscope="itemscope" itemtype="http://schema.org/Article" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://cypressen.github.io/CS/CS61B/CS61B-SP21-Week7-report/"><span hidden="hidden" itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="image" content="/assets/avatar.jpg"><meta itemprop="name" content="cypress"><meta itemprop="description" content=", "></span><span hidden="hidden" itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="サイプレス"></span><div class="body md" itemprop="articleBody"><h1 id="lecture-17-b-trees-2-3-2-3-4-trees"><a class="anchor" href="#lecture-17-b-trees-2-3-2-3-4-trees">#</a> Lecture 17. B-Trees (2-3, 2-3-4 Trees)</h1>
<h2 id="bst-height-and-the-useful-big-o"><a class="anchor" href="#bst-height-and-the-useful-big-o">#</a> BST Height and The Useful BIG O</h2>
<p>BST height is all four of these:</p>
<ul>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span></li>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Θ</mi><mo stretchy="false">(</mo><mi>l</mi><mi>o</mi><mi>g</mi><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Θ(log n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">Θ</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span> in the best case ("bushy").</li>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Θ</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Θ(N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">Θ</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span> in the worst case ("spindly").</li>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>N</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(N^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></li>
</ul>
<blockquote>
<p>需要注意的是 最后一条是正确的。因为 O 的意思就是 less than or equal。</p>
<p>bushy: bushy hair or fur is very thick. 对应树就是茂密，节点密度高</p>
<p>spindly: long or tall and thin, and looking weak. 对应树就是稀疏，节点密度低</p>
</blockquote>
<p>The middle two statements are more informative.</p>
<ul>
<li>Big O is NOT mathematically the same thing as “worst case”.
<ul>
<li>e.g. BST heights are <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>N</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(N^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>, but are not quadratic in the worst case.</li>
<li>… but Big O often used as shorthand for “worst case”.</li>
</ul>
</li>
</ul>
<blockquote>
<p>quadratic: 二次</p>
</blockquote>
<p>一般情况下，以<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span> 作为用来讨论最坏情况的形式。<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>N</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(N^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> 之类的通常不会讨论，即便它们在概念上是正确的。</p>
<p>所以，我们将上面列的四条再进一步简化，得到：</p>
<p>BST height is both of these:</p>
<ul>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Θ</mi><mo stretchy="false">(</mo><mi>l</mi><mi>o</mi><mi>g</mi><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Θ(log N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">Θ</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span> in the best case (“bushy”).</li>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Θ</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Θ(N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">Θ</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span> in the worst case (“spindly”).</li>
</ul>
<h2 id="height-depth-and-performance"><a class="anchor" href="#height-depth-and-performance">#</a> Height, Depth, and Performance</h2>
<h3 id="height-and-depth"><a class="anchor" href="#height-and-depth">#</a> Height and Depth</h3>
<p>Height and average depth are important properties of BSTs.</p>
<ul>
<li>The <strong>“depth” of a node</strong> is how far it is from the root, e.g. depth(g) = 2.</li>
<li>The <strong>“height” of a tree</strong> is the depth of its deepest leaf, e.g. height(T) = 4.</li>
<li>The <strong>“average depth”</strong> of a tree is the average depth of a tree’s nodes.
<ul>
<li>(<strong>0</strong>x1 + <strong>1</strong>x2 + <strong>2</strong>x4 + <strong>3</strong>x6 + <strong>4</strong>x1)/(1+2+4+6+1) = 2.35</li>
</ul>
</li>
</ul>
<p><img loading="lazy" data-src="/pic/CS/CS61B/week7/1.webp" alt=""></p>
<p>Height and average depth determine runtimes for BST operations.</p>
<ul>
<li>The <strong>“height” of a tree</strong> determines the worst case runtime to find a node.
<ul>
<li>Example: Worst case is contains(s), requires 5 comparisons (height + 1).</li>
</ul>
</li>
<li>The <strong>“average depth”</strong> determines the average case runtime to find a node.
<ul>
<li>Example: Average case is 3.35 comparisons (average depth + 1).</li>
</ul>
</li>
</ul>
<p>以上内容提到了或许未曾了解的 **"average depth"**</p>
<h2 id="performance"><a class="anchor" href="#performance">#</a> Performance</h2>
<p><strong>Average Depth.</strong> If N distinct keys are inserted into a BST, the expected average depth is ~ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mi>l</mi><mi>n</mi><mi>N</mi><mo>=</mo><mi mathvariant="normal">Θ</mi><mo stretchy="false">(</mo><mi>l</mi><mi>o</mi><mi>g</mi><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">2 ln N = Θ(log N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">n</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">Θ</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span>​.</p>
<ul>
<li>Thus, average runtime for contains operation is Θ(log N) on a tree built with random inserts.</li>
</ul>
<p><strong>Tree Height.</strong> If N distinct keys are inserted in random order, expected tree height is ~ 4.311 ln N <a target="_blank" rel="noopener" href="http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.152.1289&amp;rep=rep1&amp;type=pdf">(see Reed, 2003)</a>.</p>
<ul>
<li>Thus, worst case runtime for contains operation is Θ(log N) on a tree built with random inserts.</li>
<li>Proof is well beyond the scope of the course (and is 27 pages long!).</li>
</ul>
<blockquote>
<p>Note: ~ is the same thing as Big Theta, but you don’t drop the multiplicative constants.</p>
</blockquote>
<p>若向一个空的 BST 随机添加数据，它的密度总会往 "bushy" 方向进行。因此，通过随机插入建立的 BST 可以说是拥有<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Θ</mi><mo stretchy="false">(</mo><mi>l</mi><mi>o</mi><mi>g</mi><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Θ(log N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">Θ</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span> 的表现，但是我们并不总是依靠<strong>随机</strong>建立 BST。</p>
<p>因此，为了建立 "bushy" 平衡的 BST，我们后面讲讨论其方法。</p>
<h2 id="b-trees-2-3-trees-2-3-4-trees"><a class="anchor" href="#b-trees-2-3-trees-2-3-4-trees">#</a> B-trees / 2-3 trees / 2-3-4 trees</h2>
<h3 id="b-trees"><a class="anchor" href="#b-trees">#</a> B-trees</h3>
<p><strong>B-tree</strong> 需含有一个参数 L，用来指一个节点的数据数目上限。例如 L = 3，就可以有如图所示的树</p>
<p><img loading="lazy" data-src="/pic/CS/CS61B/week7/2.webp" alt=""></p>
<p>通过这种将一个节点变化为数组形式的方式，使得 B-tree 可以保持非常不错的平衡度。</p>
<p>B-trees of order L = 3 (like we used today) are also called a 2-3-4 tree or a 2-4 tree.</p>
<ul>
<li>“2-3-4” refers to the number of children that a node can have, e.g. a 2-3-4 tree node may have 2, 3, or 4 children.</li>
</ul>
<p>B-trees of order L=2 are also called a 2-3 tree.</p>
<p>2-3 trees 就指的是 L = 2 的 B-tree, 2-3-4 则是 L = 3。依次类推。</p>
<blockquote>
<p><em>The origin of "B-tree" has never been explained by the authors. As we shall see, "balanced," "broad," or "bushy" might apply. Others suggest that the "B" stands for Boeing. Because of his contributions, however, it seems appropriate to think of B-trees as "Bayer"-trees.</em></p>
<p>- Douglas Corner (The Ubiquitous B-Tree)</p>
</blockquote>
<p>B-tree 是如何拥有能保持高度平衡的特性呢？</p>
<h3 id="b-tree-bushiness-invariants"><a class="anchor" href="#b-tree-bushiness-invariants">#</a> B-Tree Bushiness Invariants</h3>
<p>Because of the way B-Trees are constructed, we get two nice invariants:</p>
<ul>
<li>All leaves must be the same distance from the source.</li>
<li>A non-leaf node with k items must have exactly k+1 children.</li>
<li>Example: The tree given below is impossible.
<ul>
<li>Leaves ([1] and [5 6 7]) are a different distance from the source.</li>
<li>Non-leaf node [2 3] has two items but only only one child. Should have three children.</li>
<li><img loading="lazy" data-src="/pic/CS/CS61B/week7/3.webp" alt="">注意，该树不存在如上规则下</li>
</ul>
</li>
</ul>
<p>We have not proven these invariants rigorously, but try thinking them through.</p>
<p>其实思考的话，假设在 L = 3 的情况下插入数据至一个空树，在第三次插入后，它必会是一个满的节点，在进行第四次插入时，它必定会分裂（也就是将一个数据向上提，并以此数据的位置做原数组的分裂操作，分裂后的两个数组各自变化为节点，这样，一次分裂就必定会产生两个节点并且连接在被提上去的数据所属的节点下），分裂后依旧能够保证平衡。</p>
<p>可以通过<a target="_blank" rel="noopener" href="https://www.cs.usfca.edu/~galles/visualization/BTree.html"> This link</a> 进行测试。</p>
<blockquote>
<p>略：关于讨论 B-tree runtime —— <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>l</mi><mi>o</mi><mi>g</mi><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(log N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span></p>
</blockquote>
<div class="tags"><a href="/tags/java/" rel="tag"><i class="ic i-tag"></i>java</a><a href="/tags/CS61B/" rel="tag"><i class="ic i-tag"></i>CS61B</a></div></div><footer><div class="meta"><span class="icon"><i class="ic i-eye"></i></span><span>此文章已被阅读次数:</span><span class="waline-pageview-count" id="twikoo_visitors" data-path="CS/CS61B/CS61B-SP21-Week7-report/">正在加载...</span><span class="item"><span class="icon"><i class="ic i-calendar-check"></i></span><span class="text">更新于</span><time title="修改时间：2024-05-12 22:53:05" itemprop="dateModified" datetime="2024-05-12T22:53:05+08:00">2024-05-12</time></span></div><div id="copyright"><ul><li class="author"><strong>本文作者：</strong>cypress<i class="ic i-at"><em>@</em></i>サイプレス</li><li class="link"><strong>本文链接：</strong><a href="https://cypressen.github.io/CS/CS61B/CS61B-SP21-Week7-report/" title="[CS61B_SP21]Week7_report">https://cypressen.github.io/CS/CS61B/CS61B-SP21-Week7-report/</a></li><li class="license"><strong>版权声明：</strong>本站所有文章除特别声明外，均采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/CS/CS61B/CS61B-SP21-Week5-report/" rel="prev" itemprop="url" data-background-image="https://ooo.0x0.ooo/2024/04/25/OpPnoI.jpg" title="[CS61B_SP21]Week5_report"><span class="type">上一篇</span><span class="category"><i class="ic i-flag"></i>CS61B</span><h3>[CS61B_SP21]Week5_report</h3></a></div><div class="item right"><a href="/CS/CS61B/CS61B-SP21-Week6-report/" rel="next" itemprop="url" data-background-image="https://ooo.0x0.ooo/2024/05/02/OpVqqY.png" title="[CS61B_SP21]Week6_report"><span class="type">下一篇</span><span class="category"><i class="ic i-flag"></i>CS61B</span><h3>[CS61B_SP21]Week6_report</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#lecture-17-b-trees-2-3-2-3-4-trees"><span class="toc-number">1.</span> <span class="toc-text"> Lecture 17. B-Trees (2-3, 2-3-4 Trees)</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#bst-height-and-the-useful-big-o"><span class="toc-number">1.1.</span> <span class="toc-text"> BST Height and The Useful BIG O</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#height-depth-and-performance"><span class="toc-number">1.2.</span> <span class="toc-text"> Height, Depth, and Performance</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#height-and-depth"><span class="toc-number">1.2.1.</span> <span class="toc-text"> Height and Depth</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#performance"><span class="toc-number">1.3.</span> <span class="toc-text"> Performance</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#b-trees-2-3-trees-2-3-4-trees"><span class="toc-number">1.4.</span> <span class="toc-text"> B-trees / 2-3 trees / 2-3-4 trees</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#b-trees"><span class="toc-number">1.4.1.</span> <span class="toc-text"> B-trees</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#b-tree-bushiness-invariants"><span class="toc-number">1.4.2.</span> <span class="toc-text"> B-Tree Bushiness Invariants</span></a></li></ol></li></ol></li></ol></div><div class="related panel pjax" data-title="系列文章"><ul><li><a href="/CS/CS61B/CS61B-SP21-Week1-report/" rel="bookmark" title="[CS61B_SP21]Week1_report">[CS61B_SP21]Week1_report</a></li><li><a href="/CS/CS61B/CS61B-SP21-Week2-report/" rel="bookmark" title="[CS61B_SP21]Week2_report">[CS61B_SP21]Week2_report</a></li><li><a href="/CS/CS61B/CS61B-SP21-Week3-report/" rel="bookmark" title="[CS61B_SP21]Week3_report">[CS61B_SP21]Week3_report</a></li><li><a href="/CS/CS61B/CS61B-SP21-Week4-report/" rel="bookmark" title="[CS61B_SP21]Week4_report">[CS61B_SP21]Week4_report</a></li><li><a href="/CS/CS61B/CS61B-SP21-Week5-report/" rel="bookmark" title="[CS61B_SP21]Week5_report">[CS61B_SP21]Week5_report</a></li><li><a href="/CS/CS61B/CS61B-SP21-Week6-report/" rel="bookmark" title="[CS61B_SP21]Week6_report">[CS61B_SP21]Week6_report</a></li><li class="active"><a href="/CS/CS61B/CS61B-SP21-Week7-report/" rel="bookmark" title="[CS61B_SP21]Week7_report">[CS61B_SP21]Week7_report</a></li></ul></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><img class="image" loading="lazy" decoding="async" itemprop="image" alt="cypress" src="/assets/avatar.webp"><p class="name" itemprop="name">cypress</p><div class="description" itemprop="description"></div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">17</span><span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">11</span><span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">10</span><span class="name">标签</span></a></div></nav><div class="social"><a target="_blank" rel="noopener" href="https://github.com/cypressen" class="item github" title="https://github.com/cypressen"><i class="ic i-github"></i></a><a href="mailto:2050038998@QQ.com" class="item email" title="mailto:2050038998@QQ.com"><i class="ic i-envelope"></i></a></div><div class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item dropdown"><a href="/about/" rel="section"><i class="ic i-user"></i>关于</a><ul class="submenu"><li class="item"><a href="/settings/" rel="section"><i class="ic i-heart"></i>设定簇</a></li></ul></li><li class="item dropdown"><a href="#" onclick="return false;"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li></div></div></div></div><ul id="quick"><li class="prev pjax"><a href="/CS/CS61B/CS61B-SP21-Week6-report/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/CS/CS61B/CS61B-SP21-Week5-report/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>最新评论</h2><ul class="leancloud-recent-comment" id="new-comment"></ul></div></div><div class="status"><div class="copyright">© 2024 -<span itemprop="copyrightYear">2024</span><span class="with-love"><i class="ic i-sakura rotate"></i></span><span class="author" itemprop="copyrightHolder">cypress @ cypress</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i></span><span title="站点总字数">123k 字</span><span class="post-meta-divider"> | </span><span class="post-meta-item-icon"><i class="ic i-coffee"></i></span><span title="站点阅读时长">1:52</span></div><div class="powered-by">基于 <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a> &amp; Theme.<a target="_blank" rel="noopener" href="https://github.com/theme-shoka-x/hexo-theme-shokaX/">ShokaX</a></div></div></div></footer></div><script data-config="" type="text/javascript">var LOCAL = {
    ispost: true,
        path: `CS/CS61B/CS61B-SP21-Week7-report/`,
        favicon: {
        show: `サイプレス`,
        hide: `cypress`
    },
    search: {
        placeholder: "文章搜索",
        empty: "关于 「 ${query} 」，什么也没搜到",
        stats: "${time} ms 内找到 ${hits} 条结果"
    },
    copy_tex: true,
    katex: true,
    mermaid: false,
    audio: undefined,
    fancybox: true,
    nocopy: false,
    outime: true,
    template: `<div class="note warning"><p><span class="label warning">文章时效性提示</span><br>这是一篇发布于 {{publish}} 天前，最后一次更新在 {{updated}} 天前的文章，部分信息可能已经发生改变，请注意甄别。</p></div>`,
    quiz: {
        choice: `单选题`,
        multiple: `多选题`,
        true_false: `判断题`,
        essay: `问答题`,
        gap_fill: `填空题`,
        mistake: `错题备注`
    },
    ignores: [
        (uri) => uri.includes('#'),
        (uri) => new RegExp(LOCAL.path + '$').test(uri),
            []
    ]
};
</script><script>(function(c,l,a,r,i,t,y){
    c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
    t=l.createElement(r);t.async=true;t.src="https://www.clarity.ms/tag/"+i;
    y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
})(window, document, "clarity", "script", "true");</script><script async="async" src="https://www.googletagmanager.com/gtag/js?id=true"></script><script data-pjax="data-pjax">window.dataLayer = window.dataLayer || [];
function gtag() {
    dataLayer.push(arguments);
}
gtag('js', new Date());
gtag('config', 'true');</script><script src="https://lf9-cdn-tos.bytecdntp.com/cdn/expire-6-M/pace/1.2.4/pace.min.js" async=""></script><script src="/js/siteInit.js?v=0.4.2" type="module" fetchpriority="high" defer=""></script><script async>window.onload=function(){var a=document.createElement('script'),b=document.getElementsByTagName('script')[0];a.type='text/javascript',a.async=!0,a.src='/sw-register.js?v='+Date.now(),b.parentNode.insertBefore(a,b)};</script></body></html>