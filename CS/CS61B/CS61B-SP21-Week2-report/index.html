<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta http-equiv="X-UA-COMPATIBLE" content="IE=edge,chrome=1"><meta name="renderer" content="webkit"><link rel="icon" type="image/ico" sizes="32x32" href="/assets/favicon.ico"><link rel="apple-touch-icon" sizes="180x180" href="/assets/apple-touch-icon.png"><meta name="google-site-verification" content="<meta name=&quot;google-site-verification&quot; content=&quot;RPaIzPiVnF1_SrESEzzzdNdJg_oYfT0t9r7A4QU1iV4&quot; />"><link rel="alternate" href="/rss.xml" title="サイプレス" type="application/rss+xml"><link rel="alternate" href="/atom.xml" title="サイプレス" type="application/atom+xml"><link rel="alternate" type="application/json" title="サイプレス" href="https://cypressen.github.io/feed.json"><link rel="preconnect" href="https://lf9-cdn-tos.bytecdntp.com"><link rel="preconnect" href="https://at.alicdn.com"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://unpkg.com"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Mulish:400,400italic,700,700italic%7CFredericka%20the%20Great:400,400italic,700,700italic%7CNoto%20Serif%20JP:400,400italic,700,700italic%7CNoto%20Serif%20SC:400,400italic,700,700italic%7CInconsolata:400,400italic,700,700italic&amp;display=swap&amp;subset=latin,latin-ext" media="none" onload="this.media='all'"><link rel="stylesheet" href="/css/app.css?v=0.4.2"><link rel="modulepreload" href="/js/chunk-DOULWTAQ.js"><link rel="modulepreload" href="/js/chunk-GX7YDKHH.js"><link rel="modulepreload" href="/js/chunk-KYUUYBZH.js"><link rel="modulepreload" href="/js/chunk-QGM62ATE.js"><link rel="modulepreload" href="/js/chunk-QZYERO2P.js"><link rel="modulepreload" href="/js/comments-I7MRCHQB.js"><link rel="modulepreload" href="/js/index.esm-VHAZSVU5.js"><link rel="modulepreload" href="/js/post-A5PPTEXL.js"><link rel="modulepreload" href="/js/quicklink-TSXH5ZQW.js"><link rel="modulepreload" href="/js/search-R7I6QHOD.js"><link rel="modulepreload" href="/js/siteInit.js"><link rel="stylesheet" href="https://npm.webcache.cn/@waline/client@3.0.0-alpha.11/dist/waline.css" media="none" onload="this.media='all'"><link rel="preload" href="h" as="image" fetchpriority="high"><link rel="preload" href="t" as="image" fetchpriority="high"><link rel="preload" href="t" as="image" fetchpriority="high"><link rel="preload" href="p" as="image" fetchpriority="high"><link rel="preload" href="s" as="image" fetchpriority="high"><link rel="preload" href=":" as="image" fetchpriority="high"><link rel="preload" href="/" as="image" fetchpriority="high"><link rel="preload" href="/" as="image" fetchpriority="high"><link rel="preload" href="o" as="image" fetchpriority="high"><link rel="preload" href="o" as="image" fetchpriority="high"><link rel="preload" href="o" as="image" fetchpriority="high"><link rel="preload" href="." as="image" fetchpriority="high"><link rel="preload" href="0" as="image" fetchpriority="high"><link rel="preload" href="x" as="image" fetchpriority="high"><link rel="preload" href="0" as="image" fetchpriority="high"><link rel="preload" href="." as="image" fetchpriority="high"><link rel="preload" href="o" as="image" fetchpriority="high"><link rel="preload" href="o" as="image" fetchpriority="high"><link rel="preload" href="o" as="image" fetchpriority="high"><link rel="preload" href="/" as="image" fetchpriority="high"><link rel="preload" href="2" as="image" fetchpriority="high"><link rel="preload" href="0" as="image" fetchpriority="high"><link rel="preload" href="2" as="image" fetchpriority="high"><link rel="preload" href="4" as="image" fetchpriority="high"><link rel="preload" href="/" as="image" fetchpriority="high"><link rel="preload" href="0" as="image" fetchpriority="high"><link rel="preload" href="3" as="image" fetchpriority="high"><link rel="preload" href="/" as="image" fetchpriority="high"><link rel="preload" href="2" as="image" fetchpriority="high"><link rel="preload" href="2" as="image" fetchpriority="high"><link rel="preload" href="/" as="image" fetchpriority="high"><link rel="preload" href="O" as="image" fetchpriority="high"><link rel="preload" href="g" as="image" fetchpriority="high"><link rel="preload" href="K" as="image" fetchpriority="high"><link rel="preload" href="d" as="image" fetchpriority="high"><link rel="preload" href="p" as="image" fetchpriority="high"><link rel="preload" href="Y" as="image" fetchpriority="high"><link rel="preload" href="." as="image" fetchpriority="high"><link rel="preload" href="j" as="image" fetchpriority="high"><link rel="preload" href="p" as="image" fetchpriority="high"><link rel="preload" href="g" as="image" fetchpriority="high"><meta name="keywords" content="java,learningReport"><link rel="canonical" href="https://cypressen.github.io/CS/CS61B/CS61B-SP21-Week2-report/"><title>[CS61B_SP21]Week2_report</title><meta name="generator" content="Hexo 7.0.0"></head><body itemscope="" itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope="" itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">[CS61B_SP21]Week2_report</h1><div class="meta"><span class="item" title="创建时间：2024-03-20 15:52:24"><span class="icon"><i class="ic i-calendar"></i></span><span class="text">发表于</span><time itemprop="dateCreated datePublished" datetime="2024-03-20T15:52:24+08:00">2024-03-20</time></span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i></span><span class="text">本文字数</span><span>19k</span><span class="text">字</span></span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i></span><span class="text">阅读时长</span><span>17 分钟</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span><span class="line"></span><span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">cypress</a></li></ul><ul class="right" id="rightNav"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div class="pjax" id="imgs"><img src="https://ooo.0x0.ooo/2024/03/22/OgKdpY.jpg" loading="eager" decoding="async" fetchpriority="high" alt="サイプレス"></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"></path></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"></use><use xlink:href="#gentle-wave" x="48" y="3"></use><use xlink:href="#gentle-wave" x="48" y="5"></use><use xlink:href="#gentle-wave" x="48" y="7"></use></g></svg></div><main><div class="inner"><div class="pjax" id="main"><div class="article wrap"><div class="breadcrumb" itemlistelement="" itemscope="" itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i><span><a href="/">首页</a></span><i class="ic i-angle-right"></i><span itemprop="itemListElement" itemscope="itemscope" itemtype="https://schema.org/ListItem"><a href="/categories/CS/" itemprop="item" rel="index" title="分类于CS"><span itemprop="name">CS<meta itemprop="position" content="0"></span></a></span><i class="ic i-angle-right"></i><span class="current" itemprop="itemListElement" itemscope="itemscope" itemtype="https://schema.org/ListItem"><a href="/categories/CS/CS61B/" itemprop="item" rel="index" title="分类于CS61B"><span itemprop="name">CS61B<meta itemprop="position" content="1"></span></a></span></div><article class="post block" itemscope="itemscope" itemtype="http://schema.org/Article" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://cypressen.github.io/CS/CS61B/CS61B-SP21-Week2-report/"><span hidden="hidden" itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="image" content="/assets/avatar.jpg"><meta itemprop="name" content="cypress"><meta itemprop="description" content=", "></span><span hidden="hidden" itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="サイプレス"></span><div class="body md" itemprop="articleBody"><h1 id="intro"><a class="anchor" href="#intro">#</a> Intro</h1>
<p>这周的课程主要讲了关于测试、调试、链表、以及一些编程思想。</p>
<p>这篇博文大量引用了原文，有一部分是我认为比较有趣或是经典的话。</p>
<p>博文的篇幅可能较大，所以我将精选一部分内容在 Suggest 列出</p>
<blockquote>
<p>Suggest</p>
<ul>
<li>
<p><a href="#reference-type">Reference Type</a> 关于 Java 的值传递特性</p>
</li>
<li>
<p><a href="#better-way-to-write-list">Better way to write list</a> 记录了优化糟糕的列表编写方式的过程</p>
</li>
<li>
<p><a href="#invariants">Invariants</a> 不变性思想</p>
</li>
</ul>
</blockquote>
<div class="note info">
<p>在你阅读之前，你或许需要做完 Week 2 的内容</p>
</div>
<h1 id="lecture-3-testing"><a class="anchor" href="#lecture-3-testing">#</a> Lecture 3. Testing</h1>
<blockquote>
<p>How do you know that your code works?</p>
</blockquote>
<blockquote>
<p>In the real world, programmers believe their code works because of tests they write themselves</p>
</blockquote>
<p>测试自己的代码，这似乎于调试不同</p>
<h2 id="junit"><a class="anchor" href="#junit">#</a>  <code>JUnit</code></h2>
<figure class="highlight java"><figcaption data-lang="java"><span>TestSort</span></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestSort</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token class-name">Testsort</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> input <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">"i"</span><span class="token punctuation">,</span> <span class="token string">"have"</span><span class="token punctuation">,</span> <span class="token string">"an"</span><span class="token punctuation">,</span> <span class="token string">"egg"</span><span class="token punctuation">}</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> expected <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">"an"</span><span class="token punctuation">,</span> <span class="token string">"egg"</span><span class="token punctuation">,</span> <span class="token string">"have"</span><span class="token punctuation">,</span> <span class="token string">"i"</span><span class="token punctuation">}</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token class-name">Sort</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> input<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="8"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span>input<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> expected<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="9"></td><td><pre>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"The position '"</span> <span class="token operator">+</span> i <span class="token operator">+</span> <span class="token string">"' seems to be wrong. Expected '"</span> <span class="token operator">+</span> expected<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">"' but get '"</span> <span class="token operator">+</span> input<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">+</span><span class="token string">"'"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>            <span class="token punctuation">}</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token punctuation">}</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token punctuation">}</span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token class-name">Testsort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token punctuation">}</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token punctuation">}</span></pre></td></tr></tbody></table></figure><figure class="highlight java"><figcaption data-lang="java"><span>Sort</span></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Sort</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">sort</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">)</span><span class="token punctuation">{</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token comment">// some sort method, like selection sort.</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token punctuation">}</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">}</span></pre></td></tr></tbody></table></figure><p>在 <code>TestSort</code>  中，中间这块代码有点冗长</p>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> input<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="2"></td><td><pre>	<span class="token keyword">if</span> <span class="token punctuation">(</span>input<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> expected<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="3"></td><td><pre>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"The position '"</span> <span class="token operator">+</span> i <span class="token operator">+</span> <span class="token string">"' seems to be wrong. Expected '"</span> <span class="token operator">+</span> expected<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">"' but get '"</span> <span class="token operator">+</span> input<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">+</span><span class="token string">"'"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>            <span class="token punctuation">}</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token punctuation">}</span></pre></td></tr></tbody></table></figure><blockquote>
<p>It was just tedious to write something like this.</p>
</blockquote>
<p>引入 <code>JUnit</code>  方法来替代</p>
<div class="note info">
<p><code>JUnit</code>  需要在项目结构里引入库。</p>
<p>具体操作为：项目结构 -&gt; 库 -&gt; 新建项目库 -&gt; 选择 “java” -&gt; 在 IDEA 文件目录下 "/lib" 根目录找到 "junit4.jar"</p>
</div>
<figure class="highlight java"><figcaption data-lang="java"><span>TestSort</span></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestSort</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token class-name">Testsort</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> input <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">"i"</span><span class="token punctuation">,</span> <span class="token string">"have"</span><span class="token punctuation">,</span> <span class="token string">"an"</span><span class="token punctuation">,</span> <span class="token string">"egg"</span><span class="token punctuation">}</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> expected <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">"an"</span><span class="token punctuation">,</span> <span class="token string">"egg"</span><span class="token punctuation">,</span> <span class="token string">"have"</span><span class="token punctuation">,</span> <span class="token string">"i"</span><span class="token punctuation">}</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token class-name">Sort</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        </pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span>Assert</span><span class="token punctuation">.</span><span class="token function">assertArrayEquals</span><span class="token punctuation">(</span>expected<span class="token punctuation">,</span>input<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token punctuation">}</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token class-name">Testsort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token punctuation">}</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">}</span></pre></td></tr></tbody></table></figure><p><img loading="lazy" data-src="/pic/CS/CS61B/week2/1.webp" alt="终端输出"></p>
<blockquote>
<p>Silence is an indication that things are working well</p>
</blockquote>
<p>没有令人头大的输出是极好的。</p>
<h3 id="tips"><a class="anchor" href="#tips">#</a> Tips</h3>
<figure class="highlight java"><figcaption data-lang="java"><span>tips</span></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span> <span class="token comment">// with this import, you can use @Test instead of verbose @org.junit.Test</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token import static"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token operator">*</span></span><span class="token punctuation">;</span> <span class="token comment">// and the same, with this, use assertArrayEquals instead of verbose org.junit.Assert.assertArrayEquals</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">// they are like `using` in cpp;</span></pre></td></tr></tbody></table></figure><h3 id="attention"><a class="anchor" href="#attention">#</a> ATTENTION</h3>
<p><code>==</code>   <code>!=</code>  不总是有用</p>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token keyword">if</span><span class="token punctuation">(</span>input <span class="token operator">!=</span> expected<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span></pre></td></tr></tbody></table></figure><p>在这里是对变量的值进行比较，而它们的值为地址<br>
详见<a href="#reference-type"> Reference Type</a></p>
<h2 id="sort-testsort"><a class="anchor" href="#sort-testsort">#</a>  <code>Sort  </code>  &amp;  <code>TestSort</code></h2>
<p>在 IDEA，可以借助 IDEA 的功能实现可视化更好的测试</p>
<p>就像在 <code>proj0</code>  的各种 Test 那样</p>
<blockquote>
<p><code>Autograder</code>  in this course, is based on JUnit.</p>
</blockquote>
<p>作业评分系统 <code>Autograder</code>  也与 <code>JUnit</code>  有关</p>
<figure class="highlight java"><figcaption data-lang="java"><span>Sort</span></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Sort</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token comment">/** 具体设计：</span></pre></td></tr><tr><td data-num="4"></td><td><pre>     *  使用递归（recursion），借用 helper，选择排序</pre></td></tr><tr><td data-num="5"></td><td><pre>     * 1. 找出候选范围中的最小值，返回索引</pre></td></tr><tr><td data-num="6"></td><td><pre>     * 2. 交换</pre></td></tr><tr><td data-num="7"></td><td><pre>     * 3. 递归</pre></td></tr><tr><td data-num="8"></td><td><pre>     */</pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">sort</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token function">sort</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token punctuation">}</span></pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token comment">// find the smallest one in arr range from "start" to end;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">findSmallest</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> start<span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token keyword">int</span> smallestIndex <span class="token operator">=</span> start<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> start<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="17"></td><td><pre>            <span class="token comment">//arr[i].compareTo(); from the internet, if arr[i] &lt; arr[smallestIndex], return -1.</span></pre></td></tr><tr><td data-num="18"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>smallestIndex<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="19"></td><td><pre>                smallestIndex <span class="token operator">=</span> i<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>            <span class="token punctuation">}</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        <span class="token punctuation">}</span></pre></td></tr><tr><td data-num="22"></td><td><pre>        <span class="token keyword">return</span> smallestIndex<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token punctuation">}</span></pre></td></tr><tr><td data-num="24"></td><td><pre></pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token comment">// swap two elements by index</span></pre></td></tr><tr><td data-num="26"></td><td><pre>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">swap</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> index1<span class="token punctuation">,</span> <span class="token keyword">int</span> index2<span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="27"></td><td><pre>        <span class="token class-name">String</span> temp <span class="token operator">=</span> arr<span class="token punctuation">[</span>index1<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>        arr<span class="token punctuation">[</span>index1<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>index2<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>        arr<span class="token punctuation">[</span>index2<span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>    <span class="token punctuation">}</span></pre></td></tr><tr><td data-num="31"></td><td><pre></pre></td></tr><tr><td data-num="32"></td><td><pre>    <span class="token comment">// recursion</span></pre></td></tr><tr><td data-num="33"></td><td><pre>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">sort</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> start<span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="34"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>start <span class="token operator">==</span> arr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="35"></td><td><pre>            <span class="token keyword">return</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>        <span class="token punctuation">}</span></pre></td></tr><tr><td data-num="37"></td><td><pre>        <span class="token keyword">int</span> smallestIndex <span class="token operator">=</span> <span class="token function">findSmallest</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> start<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>        <span class="token function">swap</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> start<span class="token punctuation">,</span> smallestIndex<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>        <span class="token function">sort</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> start <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>    <span class="token punctuation">}</span></pre></td></tr><tr><td data-num="41"></td><td><pre><span class="token punctuation">}</span></pre></td></tr></tbody></table></figure><figure class="highlight java"><figcaption data-lang="java"><span>TestSort</span></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span> <span class="token comment">// with this import, you can use @Test instead of verbose @org.junit.Test</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token import static"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token operator">*</span></span><span class="token punctuation">;</span> <span class="token comment">// and the same, with this, use assertArrayEquals instead of verbose org.junit.Assert.assertArrayEquals</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">// they are like `using` in cpp;</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestSort</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token comment">// while using junit test, you need to make sure your method is non-static.</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token annotation punctuation">@Test</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token class-name">Testsort</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> input <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">"i"</span><span class="token punctuation">,</span> <span class="token string">"have"</span><span class="token punctuation">,</span> <span class="token string">"an"</span><span class="token punctuation">,</span> <span class="token string">"egg"</span><span class="token punctuation">}</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> expected <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">"an"</span><span class="token punctuation">,</span> <span class="token string">"egg"</span><span class="token punctuation">,</span> <span class="token string">"have"</span><span class="token punctuation">,</span> <span class="token string">"i"</span><span class="token punctuation">}</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token class-name">Sort</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token function">assertArrayEquals</span><span class="token punctuation">(</span>expected<span class="token punctuation">,</span> input<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token punctuation">}</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token comment">/*</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    @TEST</pre></td></tr><tr><td data-num="16"></td><td><pre>    public void TestOtherMethod(){ ... }</pre></td></tr><tr><td data-num="17"></td><td><pre>     */</pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token punctuation">}</span></pre></td></tr></tbody></table></figure><h1 id="lecture-4-references-recursion-and-lists"><a class="anchor" href="#lecture-4-references-recursion-and-lists">#</a> Lecture 4. References, Recursion, and Lists</h1>
<h2 id="mystery-of-the-walrus"><a class="anchor" href="#mystery-of-the-walrus">#</a> mystery of the  <code>Walrus</code></h2>
<p>在 CPP，我们可以直接使用 <code>=</code>  来显性拷贝同类对象，但是在 Java，似乎不是这么简单</p>
<h3 id="different-from-cpp"><a class="anchor" href="#different-from-cpp">#</a> Different from CPP</h3>
<p>这里有 CPP 和 Java 逻辑上相同的两段代码</p>
<h4 id="cpp"><a class="anchor" href="#cpp">#</a> CPP</h4>
<figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream&gt;</span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Walrus</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="4"></td><td><pre>	<span class="token keyword">int</span> weight<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>	<span class="token keyword">int</span> tuskSize<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>	<span class="token function">Walrus</span><span class="token punctuation">(</span><span class="token keyword">int</span> w<span class="token punctuation">,</span> <span class="token keyword">int</span> s<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token function">weight</span><span class="token punctuation">(</span>w<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">tuskSize</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">}</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="9"></td><td><pre>	Walrus <span class="token function">w1</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>	Walrus w2 <span class="token operator">=</span> w1<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>	w2<span class="token punctuation">.</span>weight <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>	std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> w1<span class="token punctuation">.</span>weight <span class="token operator">&lt;&lt;</span> <span class="token string">"  "</span> <span class="token operator">&lt;&lt;</span> w1<span class="token punctuation">.</span>tuskSize <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>	std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> w2<span class="token punctuation">.</span>weight <span class="token operator">&lt;&lt;</span> <span class="token string">"  "</span> <span class="token operator">&lt;&lt;</span> w2<span class="token punctuation">.</span>tuskSize <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>	<span class="token keyword">return</span> EXIT_SUCCESS<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token punctuation">}</span></pre></td></tr></tbody></table></figure><pre><code>1  10
5  10
</code></pre>
<h4 id="java"><a class="anchor" href="#java">#</a> Java</h4>
<figure class="highlight java"><figcaption data-lang="java"><span>Walrus</span></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Walrus</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">int</span> weight<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">int</span> tuskSize<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">public</span> <span class="token class-name">Walrus</span><span class="token punctuation">(</span><span class="token keyword">int</span> w<span class="token punctuation">,</span> <span class="token keyword">int</span> s<span class="token punctuation">)</span><span class="token punctuation">{</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        weight <span class="token operator">=</span> w<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        tuskSize <span class="token operator">=</span> s<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token punctuation">}</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">}</span></pre></td></tr></tbody></table></figure><figure class="highlight java"><figcaption data-lang="java"><span>Main</span></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="3"></td><td><pre>       <span class="token class-name">Walrus</span> w1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Walrus</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>       <span class="token class-name">Walrus</span> w2 <span class="token operator">=</span> w1<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>       w2<span class="token punctuation">.</span>weight <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>       <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>w1<span class="token punctuation">.</span>weight <span class="token operator">+</span> <span class="token string">" "</span> <span class="token operator">+</span> w1<span class="token punctuation">.</span>tuskSize<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>       <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>w2<span class="token punctuation">.</span>weight <span class="token operator">+</span> <span class="token string">" "</span> <span class="token operator">+</span> w2<span class="token punctuation">.</span>tuskSize<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token punctuation">}</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">}</span></pre></td></tr></tbody></table></figure><pre><code>5 10
5 10
</code></pre>
<p>对比之下，在 Java 中， <code>w2</code>  拷贝 <code>w1</code> ， <code>w1</code>  却和 <code>w2</code>  一同被修改了。这就好似， <code>w2</code>  引用了 <code>w1</code></p>
<h3 id="reference-type"><a class="anchor" href="#reference-type">#</a> Reference Type</h3>
<blockquote>
<p>There are 8 primitive types in Java:</p>
<ul>
<li>byte, short, <strong>int</strong> , long, float, <strong>double</strong>, boolean, char</li>
</ul>
<p>Everything else, including arrays, is a <strong>reference type</strong>.</p>
</blockquote>
<blockquote>
<p>When we instantiate an Object(e.g. Dog, Walrus, Planet):</p>
<ul>
<li>Java first allocates a box of bits for each instance variable of the class and<br>
fills them with a default value (e.g. 0, null).</li>
<li>The constructor then usually fills every such box with some other value.</li>
</ul>
</blockquote>
<blockquote>
<p>When we declare a variable of any reference type (Walrus, Dogs, Planet):</p>
<ul>
<li>Java allocates exactly a box of size 64 bits, no matter what type of object.</li>
<li>These bits can be either set to:
<ul>
<li>Null (all zeros).</li>
<li>The 64 bits "address" of a specific instance of that class (returned by  <code>new</code> ).</li>
</ul>
</li>
</ul>
</blockquote>
<p>在 Java，对象都是由占 64bits 的变量来索引的，也就是说，变量的内容是对象的地址</p>
<p>故，默认情况下，在进行拷贝的时候，实际上拷贝的就是地址。</p>
<blockquote>
<p>Everything else, including arrays, is a <strong>reference type</strong>.</p>
</blockquote>
<blockquote>
<p>This is sometimes called "box and pointer" notation.</p>
</blockquote>
<h4 id="attention-2"><a class="anchor" href="#attention-2">#</a> ATTENTION</h4>
<p>对基本类型不适用  <code>byte</code>   <code>short</code>   <code>int</code>   <code>long</code>   <code>float</code>   <code>double</code>   <code>boolean</code>   <code>char</code></p>
<figure class="highlight java"><figcaption data-lang="java"><span>Main</span></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="2"></td><td><pre>   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="3"></td><td><pre>      <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>      <span class="token keyword">int</span> b <span class="token operator">=</span> a<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>      b <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"a = "</span> <span class="token operator">+</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"b = "</span> <span class="token operator">+</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>   <span class="token punctuation">}</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">}</span></pre></td></tr></tbody></table></figure><pre><code>a = 2
b = 3
</code></pre>
<h3 id="parameter-passing"><a class="anchor" href="#parameter-passing">#</a> Parameter Passing</h3>
<blockquote>
<p>Passing parameters obeys the same rule: Simply <strong>copy the bits</strong> to the new scope.</p>
</blockquote>
<blockquote>
<p><strong>copy the bits</strong>: This is also called pass by value.</p>
</blockquote>
<p>参数传递就是值传递，而储存对象的变量的值，为对应的地址</p>
<figure class="highlight java"><figcaption data-lang="java"><span>Main</span></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="2"></td><td><pre>   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">makeSomeChange</span><span class="token punctuation">(</span><span class="token class-name">Walrus</span> w<span class="token punctuation">,</span> <span class="token keyword">int</span> num<span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="3"></td><td><pre>      w<span class="token punctuation">.</span>weight <span class="token operator">+=</span> <span class="token number">10</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>      num <span class="token operator">-=</span> <span class="token number">10</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>   <span class="token punctuation">}</span></pre></td></tr><tr><td data-num="6"></td><td><pre>   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="7"></td><td><pre>      <span class="token class-name">Walrus</span> w <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Walrus</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>      <span class="token keyword">int</span> num <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>      <span class="token function">makeSomeChange</span><span class="token punctuation">(</span>w<span class="token punctuation">,</span> num<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"w.weight = "</span> <span class="token operator">+</span> w<span class="token punctuation">.</span>weight <span class="token operator">+</span> <span class="token string">"  num = "</span> <span class="token operator">+</span> num<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>   <span class="token punctuation">}</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">}</span></pre></td></tr></tbody></table></figure><pre><code>w.weight = 110  num = 20
</code></pre>
<p>一般情况，对象会以引用的方式来传递。</p>
<h3 id="golden-rules-of-equals-groe"><a class="anchor" href="#golden-rules-of-equals-groe">#</a> Golden Rules of Equals (GRoE)</h3>
<blockquote>
<p>b = a; <strong>copes the bits</strong> from a into b</p>
<p>Passing parameters <strong>copes the bits</strong></p>
</blockquote>
<p>这就是 mystery of the  <code>Walrus</code></p>
<h2 id="list"><a class="anchor" href="#list">#</a> List</h2>
<div class="note danger">
<p>以下代码请不要参考，建议忽略</p>
</div>
<p>以下的代码将会在后面进行优化讨论</p>
<figure class="highlight java"><figcaption data-lang="java"><span>IntLists</span></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">IntList</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="2"></td><td><pre>	<span class="token keyword">public</span> <span class="token keyword">int</span> first<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>	<span class="token keyword">public</span> <span class="token class-name">IntList</span> rest<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>	<span class="token keyword">public</span> <span class="token class-name">IntList</span><span class="token punctuation">(</span><span class="token keyword">int</span> f<span class="token punctuation">,</span> <span class="token class-name">IntList</span> r<span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="5"></td><td><pre>		first <span class="token operator">=</span> f<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>		rest <span class="token operator">=</span> r<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>	<span class="token punctuation">}</span></pre></td></tr><tr><td data-num="8"></td><td><pre>	<span class="token comment">/** return the size of the list using recursion */</span></pre></td></tr><tr><td data-num="9"></td><td><pre>	<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="10"></td><td><pre>		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>rest  <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="11"></td><td><pre>			<span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>		<span class="token punctuation">}</span></pre></td></tr><tr><td data-num="13"></td><td><pre>		<span class="token keyword">return</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>rest<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>	<span class="token punctuation">}</span></pre></td></tr><tr><td data-num="15"></td><td><pre>	<span class="token comment">/** return the size of the list using no recursion */</span></pre></td></tr><tr><td data-num="16"></td><td><pre>	<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">iterativeSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="17"></td><td><pre>		<span class="token class-name">IntList</span> p <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>		<span class="token keyword">int</span> listSize <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>		<span class="token keyword">while</span> <span class="token punctuation">(</span>p <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="20"></td><td><pre>			listSize<span class="token operator">++</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>			p <span class="token operator">=</span> p<span class="token punctuation">.</span>rest<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>		<span class="token punctuation">}</span></pre></td></tr><tr><td data-num="23"></td><td><pre>		<span class="token keyword">return</span> listSize<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>	<span class="token punctuation">}</span></pre></td></tr><tr><td data-num="25"></td><td><pre>	<span class="token comment">/** return the ith item in list</span></pre></td></tr><tr><td data-num="26"></td><td><pre>	 *  0th is the first item */</pre></td></tr><tr><td data-num="27"></td><td><pre>	<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="28"></td><td><pre>		<span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="29"></td><td><pre>			<span class="token keyword">return</span> first<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>		<span class="token punctuation">}</span></pre></td></tr><tr><td data-num="31"></td><td><pre>		<span class="token keyword">return</span> rest<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>	<span class="token punctuation">}</span></pre></td></tr><tr><td data-num="33"></td><td><pre></pre></td></tr><tr><td data-num="34"></td><td><pre>	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="35"></td><td><pre>        <span class="token comment">// 逆序构建</span></pre></td></tr><tr><td data-num="36"></td><td><pre>		<span class="token class-name">IntList</span> myList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IntList</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>		myList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IntList</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> myList<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>		myList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IntList</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> myList<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="39"></td><td><pre></pre></td></tr><tr><td data-num="40"></td><td><pre>		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>myList<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>myList<span class="token punctuation">.</span><span class="token function">iterativeSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="42"></td><td><pre></pre></td></tr><tr><td data-num="43"></td><td><pre>		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>myList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>myList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="45"></td><td><pre>		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>myList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="46"></td><td><pre>	<span class="token punctuation">}</span></pre></td></tr><tr><td data-num="47"></td><td><pre><span class="token punctuation">}</span></pre></td></tr></tbody></table></figure><pre><code>3
3
5
10
15
</code></pre>
<h1 id="lecture-5-sllists-nested-classes-sentinel-nodes"><a class="anchor" href="#lecture-5-sllists-nested-classes-sentinel-nodes">#</a> Lecture 5.  SLLists, Nested Classes, Sentinel Nodes</h1>
<h2 id="a-better-way-to-write-list"><a class="anchor" href="#a-better-way-to-write-list">#</a> A Better way to write list</h2>
<p>这节课主要的内容就是如何去写一个更优雅的 list，因此，会有部分代码块随着我们的思维方式频繁地发生改动，这是学习的过程，是锻炼思想的过程。故，我将保留看起来糟糕的代码，并对代码进行反思，引出思考的结果。</p>
<p>这部分可能看起来有点冗长，在我未开始动手之前就感觉这部分会占很大的文字空间。但是，我想，描述思维的过程，或许就得这样。</p>
<h3 id="step-1"><a class="anchor" href="#step-1">#</a> Step 1</h3>
<p>SLList，IntNode 各做一个类，而后 SLList 嵌套 IntNode，不像 Lecture 4 中展示的方法，仅设置一个 IntList 类。现在我们将 list 整体和 list 节点区分对待。</p>
<p>可以直接复制 IntNode 类的代码到 SLList 的代码中。</p>
<p>在此基础上，我们写出了一些基本方法  <code>addFirst</code>   <code>addLast</code>   <code>getFirst</code></p>
<figure class="highlight java"><figcaption data-lang="java"><span>Step1</span></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SLList</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="2"></td><td><pre>	<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">IntNode</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="3"></td><td><pre>		<span class="token keyword">public</span> <span class="token keyword">int</span> item<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>		<span class="token keyword">public</span> <span class="token class-name">IntNode</span> next<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>		<span class="token keyword">public</span> <span class="token class-name">IntNode</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token class-name">IntNode</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="6"></td><td><pre>			item <span class="token operator">=</span> i<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>			next <span class="token operator">=</span> n<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>		<span class="token punctuation">}</span></pre></td></tr><tr><td data-num="9"></td><td><pre>	<span class="token punctuation">}</span></pre></td></tr><tr><td data-num="10"></td><td><pre>	<span class="token keyword">public</span> <span class="token class-name">IntNode</span> first<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre>	<span class="token keyword">public</span> <span class="token class-name">SLList</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="13"></td><td><pre>		first <span class="token operator">=</span> <span class="token keyword">new</span>	<span class="token class-name">IntNode</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>	<span class="token punctuation">}</span></pre></td></tr><tr><td data-num="15"></td><td><pre>	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addFirst</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="16"></td><td><pre>		first <span class="token operator">=</span> <span class="token keyword">new</span>	<span class="token class-name">IntNode</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> first<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>	<span class="token punctuation">}</span></pre></td></tr><tr><td data-num="18"></td><td><pre>	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addLast</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="19"></td><td><pre>		<span class="token class-name">IntNode</span> p <span class="token operator">=</span> first<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>		<span class="token keyword">while</span> <span class="token punctuation">(</span>p<span class="token punctuation">.</span>next <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="21"></td><td><pre>			p <span class="token operator">=</span> p<span class="token punctuation">.</span>next<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>		<span class="token punctuation">}</span></pre></td></tr><tr><td data-num="23"></td><td><pre>		p<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IntNode</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>	<span class="token punctuation">}</span></pre></td></tr><tr><td data-num="25"></td><td><pre>	<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="26"></td><td><pre>		<span class="token keyword">return</span> first<span class="token punctuation">.</span>item<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>	<span class="token punctuation">}</span></pre></td></tr><tr><td data-num="28"></td><td><pre>	</pre></td></tr><tr><td data-num="29"></td><td><pre>	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="30"></td><td><pre>		<span class="token class-name">SLList</span> <span class="token class-name">L</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SLList</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>		<span class="token class-name">L</span><span class="token punctuation">.</span><span class="token function">addFirst</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>		<span class="token class-name">L</span><span class="token punctuation">.</span><span class="token function">addFirst</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>		<span class="token class-name">L</span><span class="token punctuation">.</span><span class="token function">addLast</span><span class="token punctuation">(</span><span class="token number">19</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">L</span><span class="token punctuation">.</span><span class="token function">getFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// print 5</span></pre></td></tr><tr><td data-num="35"></td><td><pre>	<span class="token punctuation">}</span></pre></td></tr><tr><td data-num="36"></td><td><pre><span class="token punctuation">}</span></pre></td></tr></tbody></table></figure><p>我们将思考 <code>size</code>  方法获得 list 的大小。</p>
<p>考虑使用递归。递归需要传递下一个节点，但是对于 SLList 类是没有对应的成员的，而 IntNode 有。</p>
<p>所以，在这里我们考虑形参有一个 <code>IntNode</code>  类型，所以得到 <code>int size(IntNode p)</code></p>
<p>那么修饰词呢，最容易想到的就是 public。OK，but how about  <code>public static</code> ?</p>
<p>在 size 中我们并没有操作 <code>SLList</code>  的实例成员，我们想要操作的是 <code>IntNode</code> ，操作的仅有参数。</p>
<p>So,  <code>public static</code>  seems to be better.</p>
<p>但是，如果是这样的话，我们又将以 <code>SLList.size(L.first);</code>  的方式调用，这样的话，那太糟糕了。</p>
<p>如果是 <code>L.size();</code>  这会更好。但这又与 size 需要一个参数矛盾。因此我们思考重载一个 <code>size</code> ，声明 <code>public int size()</code></p>
<p>那么， <code>public int size()</code>  成为公开的了，就可以将 <code>public int size( IntNode p )</code>  的 <code>public</code>  替换为 <code>private</code></p>
<p>因此， <code>size</code>  方法将会是如下所示:</p>
<figure class="highlight java"><figcaption data-lang="java"><span>size()</span></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token class-name">IntNode</span> p<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// helper method. "This speaks the secret language of the gods."</span></pre></td></tr><tr><td data-num="2"></td><td><pre>		<span class="token keyword">if</span> <span class="token punctuation">(</span>p<span class="token punctuation">.</span>next <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="3"></td><td><pre>			<span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>		<span class="token punctuation">}</span></pre></td></tr><tr><td data-num="5"></td><td><pre>		<span class="token keyword">return</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token function">size</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>next<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>	<span class="token punctuation">}</span></pre></td></tr><tr><td data-num="7"></td><td><pre>	<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// "This speaks the language of mortals."</span></pre></td></tr><tr><td data-num="8"></td><td><pre>		<span class="token keyword">return</span> <span class="token function">size</span><span class="token punctuation">(</span>first<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>	<span class="token punctuation">}</span></pre></td></tr></tbody></table></figure><p>以 <code>L.size()</code>  调用。</p>
<p>受 <code>private</code>  和 <code>static</code>  的启发，重新审视刚才的代码，我们将做出如下更改：</p>
<figure class="highlight java"><figcaption data-lang="java"><span>extra changes</span></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">IntNode</span> <span class="token punctuation">{</span> <span class="token comment">// 在此类中，我们并不用 SLList 的实例成员，也没必要 public</span></pre></td></tr><tr><td data-num="2"></td><td><pre>		<span class="token keyword">public</span> <span class="token keyword">int</span> item<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>		<span class="token keyword">public</span> <span class="token class-name">IntNode</span> next<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>		<span class="token keyword">public</span> <span class="token class-name">IntNode</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token class-name">IntNode</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="5"></td><td><pre>			item <span class="token operator">=</span> i<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>			next <span class="token operator">=</span> n<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>		<span class="token punctuation">}</span></pre></td></tr><tr><td data-num="8"></td><td><pre>	<span class="token punctuation">}</span></pre></td></tr><tr><td data-num="9"></td><td><pre>	<span class="token keyword">private</span> <span class="token class-name">IntNode</span> first<span class="token punctuation">;</span> <span class="token comment">// 避免诸如 first.next.next = first; 的操作</span></pre></td></tr></tbody></table></figure><p>Well，我们使得我们的代码更有限制，这样可以让一些操作变得合法。</p>
<h3 id="step-2"><a class="anchor" href="#step-2">#</a> Step 2</h3>
<p>所以，我们得到：</p>
<figure class="highlight java"><figcaption data-lang="java"><span>Step2</span></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SLList</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="2"></td><td><pre>	<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">IntNode</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="3"></td><td><pre>		<span class="token keyword">public</span> <span class="token keyword">int</span> item<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>		<span class="token keyword">public</span> <span class="token class-name">IntNode</span> next<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>		<span class="token keyword">public</span> <span class="token class-name">IntNode</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token class-name">IntNode</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="6"></td><td><pre>			item <span class="token operator">=</span> i<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>			next <span class="token operator">=</span> n<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>		<span class="token punctuation">}</span></pre></td></tr><tr><td data-num="9"></td><td><pre>	<span class="token punctuation">}</span></pre></td></tr><tr><td data-num="10"></td><td><pre>	<span class="token keyword">private</span> <span class="token class-name">IntNode</span> first<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre>	<span class="token keyword">public</span> <span class="token class-name">SLList</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="13"></td><td><pre>		first <span class="token operator">=</span> <span class="token keyword">new</span>	<span class="token class-name">IntNode</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>	<span class="token punctuation">}</span></pre></td></tr><tr><td data-num="15"></td><td><pre>	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addFirst</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="16"></td><td><pre>		first <span class="token operator">=</span> <span class="token keyword">new</span>	<span class="token class-name">IntNode</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> first<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>	<span class="token punctuation">}</span></pre></td></tr><tr><td data-num="18"></td><td><pre>	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addLast</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="19"></td><td><pre>		<span class="token class-name">IntNode</span> p <span class="token operator">=</span> first<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>		<span class="token keyword">while</span> <span class="token punctuation">(</span>p<span class="token punctuation">.</span>next <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="21"></td><td><pre>			p <span class="token operator">=</span> p<span class="token punctuation">.</span>next<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>		<span class="token punctuation">}</span></pre></td></tr><tr><td data-num="23"></td><td><pre>		p<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IntNode</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>	<span class="token punctuation">}</span></pre></td></tr><tr><td data-num="25"></td><td><pre>	<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="26"></td><td><pre>		<span class="token keyword">return</span> first<span class="token punctuation">.</span>item<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>	<span class="token punctuation">}</span></pre></td></tr><tr><td data-num="28"></td><td><pre>	<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token class-name">IntNode</span> p<span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="29"></td><td><pre>		<span class="token keyword">if</span> <span class="token punctuation">(</span>p<span class="token punctuation">.</span>next <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="30"></td><td><pre>			<span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>		<span class="token punctuation">}</span></pre></td></tr><tr><td data-num="32"></td><td><pre>		<span class="token keyword">return</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token function">size</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>next<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>	<span class="token punctuation">}</span></pre></td></tr><tr><td data-num="34"></td><td><pre>	<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="35"></td><td><pre>		<span class="token keyword">return</span> <span class="token function">size</span><span class="token punctuation">(</span>first<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>	<span class="token punctuation">}</span></pre></td></tr><tr><td data-num="37"></td><td><pre></pre></td></tr><tr><td data-num="38"></td><td><pre>	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="39"></td><td><pre>		<span class="token class-name">SLList</span> <span class="token class-name">L</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SLList</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>		<span class="token class-name">L</span><span class="token punctuation">.</span><span class="token function">addFirst</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>		<span class="token class-name">L</span><span class="token punctuation">.</span><span class="token function">addFirst</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>		<span class="token class-name">L</span><span class="token punctuation">.</span><span class="token function">addLast</span><span class="token punctuation">(</span><span class="token number">19</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">L</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// print 4</span></pre></td></tr><tr><td data-num="44"></td><td><pre>	<span class="token punctuation">}</span></pre></td></tr><tr><td data-num="45"></td><td><pre><span class="token punctuation">}</span></pre></td></tr></tbody></table></figure><p>这里，我们考虑一些性能问题，比如思考 <code>size</code>  方法。</p>
<p>如果我们有 100,000 个 or more 节点呢， <code>size</code>  递归将会花费非常糟糕的时间，那有没有解决方案呢？</p>
<p>在复杂度上，我们可以用空间换时间。</p>
<p>所以，这里可以声明一个实例成员 <code>size</code> ，在会对节点数量进行增删的方法中维护 <code>size</code>  的值。这样，我们就可以删除递归的 <code>size</code>  方法。</p>
<figure class="highlight java"><figcaption data-lang="java"><span>Fast size</span></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token keyword">private</span> <span class="token keyword">int</span> size<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>	<span class="token keyword">public</span> <span class="token class-name">SLList</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="3"></td><td><pre>		first <span class="token operator">=</span> <span class="token keyword">new</span>	<span class="token class-name">IntNode</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>		size <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>	<span class="token punctuation">}</span></pre></td></tr><tr><td data-num="6"></td><td><pre>	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addFirst</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="7"></td><td><pre>		first <span class="token operator">=</span> <span class="token keyword">new</span>	<span class="token class-name">IntNode</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> first<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>		size<span class="token operator">++</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>	<span class="token punctuation">}</span></pre></td></tr><tr><td data-num="10"></td><td><pre>	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addLast</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="11"></td><td><pre>		<span class="token class-name">IntNode</span> p <span class="token operator">=</span> first<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>		<span class="token keyword">while</span> <span class="token punctuation">(</span>p<span class="token punctuation">.</span>next <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="13"></td><td><pre>			p <span class="token operator">=</span> p<span class="token punctuation">.</span>next<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>		<span class="token punctuation">}</span></pre></td></tr><tr><td data-num="15"></td><td><pre>		p<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IntNode</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>		size<span class="token operator">++</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>	<span class="token punctuation">}</span>	</pre></td></tr><tr><td data-num="18"></td><td><pre>	<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="19"></td><td><pre>		<span class="token keyword">return</span> size<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>	<span class="token punctuation">}</span></pre></td></tr></tbody></table></figure><p>对于 <code>addLast</code>  同样会有 <code>size</code>  那样的问题，但是我们这边不做考虑。</p>
<p>关于构造方法，我们自然需要一个空的构造方法。</p>
<figure class="highlight java"><figcaption data-lang="java"><span>SLList()</span></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token class-name">SLList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="2"></td><td><pre>		first <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>		size <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>	<span class="token punctuation">}</span></pre></td></tr></tbody></table></figure><p>但是需要注意，我们此前的所有方法都是以非空列表实现的，因此我们将重新审视已有的方法，以适应空列表。</p>
<p>经测试，在 <code>addLast</code>  存在问题，若 <code>first == null</code> ，我们无法访问 <code>p.next</code> ，这就相当于在访问 <code>null.next</code> ，很显然，这是不合法的。</p>
<p>因此，最开始想到的方案就是在 <code>addLast</code>  增加一次判断。</p>
<figure class="highlight java"><figcaption data-lang="java"><span>after</span></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addLast</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="2"></td><td><pre>		<span class="token keyword">if</span><span class="token punctuation">(</span>first <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span></pre></td></tr><tr><td data-num="3"></td><td><pre>			<span class="token keyword">return</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>		<span class="token punctuation">}</span></pre></td></tr><tr><td data-num="5"></td><td><pre>		<span class="token class-name">IntNode</span> p <span class="token operator">=</span> first<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>		<span class="token keyword">while</span> <span class="token punctuation">(</span>p<span class="token punctuation">.</span>next <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="7"></td><td><pre>			p <span class="token operator">=</span> p<span class="token punctuation">.</span>next<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>		<span class="token punctuation">}</span></pre></td></tr><tr><td data-num="9"></td><td><pre>		p<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IntNode</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>		size<span class="token operator">++</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>	<span class="token punctuation">}</span></pre></td></tr></tbody></table></figure><blockquote>
<p>But...it's a little ugly.</p>
<p>I mean it's just getting a little bloated.</p>
</blockquote>
<p>Well，我们的目光不应该只放在应对特殊的处理，我们需要用特殊的思维来处理特殊本身。</p>
<p>也就是，尝试将它化为一般情况。</p>
<blockquote>
<p>Code that has special cases is hard to reasonable, human beings only have so much working memory, so whenever you have code that requires you to be thinking about, exceptions to the rules and so forth. It's just harder than something where everything behaves in one consistent way.</p>
</blockquote>
<p>在这里，我们引入 <code>sentinel node</code> ，在之前我们或许见过相似的身影，即 <code>dummy node</code></p>
<figure class="highlight java"><figcaption data-lang="java"><span>sentinel</span></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token keyword">private</span> <span class="token class-name">IntNode</span> sentinel<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>	<span class="token keyword">public</span> <span class="token class-name">SLList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="3"></td><td><pre>		sentinel <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IntNode</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//sentinel.item 可以是任意数字</span></pre></td></tr><tr><td data-num="4"></td><td><pre>		size <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>	<span class="token punctuation">}</span></pre></td></tr><tr><td data-num="6"></td><td><pre>	<span class="token keyword">public</span> <span class="token class-name">SLList</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="7"></td><td><pre>		sentinel <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IntNode</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>		sentinel<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IntNode</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>		size <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>	<span class="token punctuation">}</span></pre></td></tr><tr><td data-num="11"></td><td><pre>	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addFirst</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="12"></td><td><pre>		sentinel<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IntNode</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>sentinel<span class="token punctuation">.</span>next<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>		size<span class="token operator">++</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>	<span class="token punctuation">}</span></pre></td></tr><tr><td data-num="15"></td><td><pre>	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addLast</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="16"></td><td><pre>		<span class="token class-name">IntNode</span> p <span class="token operator">=</span> sentinel<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>		<span class="token keyword">while</span> <span class="token punctuation">(</span>p<span class="token punctuation">.</span>next <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="18"></td><td><pre>			p <span class="token operator">=</span> p<span class="token punctuation">.</span>next<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>		<span class="token punctuation">}</span></pre></td></tr><tr><td data-num="20"></td><td><pre>		p<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IntNode</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>		size<span class="token operator">++</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>	<span class="token punctuation">}</span></pre></td></tr><tr><td data-num="23"></td><td><pre>	<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="24"></td><td><pre>		<span class="token keyword">return</span> sentinel<span class="token punctuation">.</span>next<span class="token punctuation">.</span>item<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>	<span class="token punctuation">}</span></pre></td></tr></tbody></table></figure><p>所以，我们最开始的 <code>first</code>  可以删去了。</p>
<h3 id="final"><a class="anchor" href="#final">#</a> Final</h3>
<figure class="highlight java"><figcaption data-lang="java"><span>Final</span></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SLList</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="2"></td><td><pre>	<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">IntNode</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="3"></td><td><pre>		<span class="token keyword">public</span> <span class="token keyword">int</span> item<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>		<span class="token keyword">public</span> <span class="token class-name">IntNode</span> next<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>		<span class="token keyword">public</span> <span class="token class-name">IntNode</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token class-name">IntNode</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="6"></td><td><pre>			item <span class="token operator">=</span> i<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>			next <span class="token operator">=</span> n<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>		<span class="token punctuation">}</span></pre></td></tr><tr><td data-num="9"></td><td><pre>	<span class="token punctuation">}</span></pre></td></tr><tr><td data-num="10"></td><td><pre>	<span class="token comment">/** The first item (if it exists) is at sentinel.next</span></pre></td></tr><tr><td data-num="11"></td><td><pre>     *  sentinel node, which is just like dummy node*/</pre></td></tr><tr><td data-num="12"></td><td><pre>	<span class="token keyword">private</span> <span class="token class-name">IntNode</span> sentinel<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>	<span class="token comment">/** Fast size()*/</span></pre></td></tr><tr><td data-num="14"></td><td><pre>	<span class="token keyword">private</span> <span class="token keyword">int</span> size<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre></pre></td></tr><tr><td data-num="16"></td><td><pre>	<span class="token keyword">public</span> <span class="token class-name">SLList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="17"></td><td><pre>		<span class="token comment">//sentinel.item 可以是任意数字</span></pre></td></tr><tr><td data-num="18"></td><td><pre>		sentinel <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IntNode</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="19"></td><td><pre>		size <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>	<span class="token punctuation">}</span></pre></td></tr><tr><td data-num="21"></td><td><pre>	<span class="token keyword">public</span> <span class="token class-name">SLList</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="22"></td><td><pre>		sentinel <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IntNode</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>		sentinel<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IntNode</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>		size <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>	<span class="token punctuation">}</span></pre></td></tr><tr><td data-num="26"></td><td><pre>	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addFirst</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="27"></td><td><pre>		sentinel<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IntNode</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> sentinel<span class="token punctuation">.</span>next<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>		size<span class="token operator">++</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>	<span class="token punctuation">}</span></pre></td></tr><tr><td data-num="30"></td><td><pre>	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addLast</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="31"></td><td><pre>		<span class="token class-name">IntNode</span> p <span class="token operator">=</span> sentinel<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>		<span class="token keyword">while</span> <span class="token punctuation">(</span>p<span class="token punctuation">.</span>next <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="33"></td><td><pre>			p <span class="token operator">=</span> p<span class="token punctuation">.</span>next<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>		<span class="token punctuation">}</span></pre></td></tr><tr><td data-num="35"></td><td><pre>		p<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IntNode</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>		size<span class="token operator">++</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>	<span class="token punctuation">}</span></pre></td></tr><tr><td data-num="38"></td><td><pre>	<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="39"></td><td><pre>		<span class="token keyword">return</span> sentinel<span class="token punctuation">.</span>next<span class="token punctuation">.</span>item<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>	<span class="token punctuation">}</span></pre></td></tr><tr><td data-num="41"></td><td><pre>	<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="42"></td><td><pre>		<span class="token keyword">return</span> size<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>	<span class="token punctuation">}</span></pre></td></tr><tr><td data-num="44"></td><td><pre></pre></td></tr><tr><td data-num="45"></td><td><pre>	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="46"></td><td><pre>		<span class="token class-name">SLList</span> <span class="token constant">L1</span> <span class="token operator">=</span> <span class="token keyword">new</span>	<span class="token class-name">SLList</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="47"></td><td><pre>		<span class="token constant">L1</span><span class="token punctuation">.</span><span class="token function">addLast</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="48"></td><td><pre>		<span class="token constant">L1</span><span class="token punctuation">.</span><span class="token function">addFirst</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="49"></td><td><pre></pre></td></tr><tr><td data-num="50"></td><td><pre>		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token constant">L1</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="51"></td><td><pre>		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token constant">L1</span><span class="token punctuation">.</span><span class="token function">getFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="52"></td><td><pre></pre></td></tr><tr><td data-num="53"></td><td><pre></pre></td></tr><tr><td data-num="54"></td><td><pre>		<span class="token class-name">SLList</span> <span class="token constant">L2</span> <span class="token operator">=</span> <span class="token keyword">new</span>	<span class="token class-name">SLList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="55"></td><td><pre>		<span class="token constant">L2</span><span class="token punctuation">.</span><span class="token function">addLast</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="56"></td><td><pre>		<span class="token constant">L2</span><span class="token punctuation">.</span><span class="token function">addFirst</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="57"></td><td><pre>		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token constant">L2</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="58"></td><td><pre>		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token constant">L2</span><span class="token punctuation">.</span><span class="token function">getFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="59"></td><td><pre>	<span class="token punctuation">}</span></pre></td></tr><tr><td data-num="60"></td><td><pre><span class="token punctuation">}</span></pre></td></tr></tbody></table></figure><h3 id="sum"><a class="anchor" href="#sum">#</a> Sum</h3>
<ul>
<li>在类范围将列表和节点分隔又联系起来，尽可能单元化</li>
<li>有时候，我们需要做出空间换取时间或者时间换空间的策略</li>
<li>使用 <code>private</code>   <code>static</code>  等关键词使代码更规范</li>
<li>将特殊情况一般化</li>
<li>在做出关联性改变的时候需要重新审视先前的结果</li>
</ul>
<h2 id="invariants"><a class="anchor" href="#invariants">#</a> Invariants</h2>
<blockquote>
<p>An invariant is a condition that is guaranteed to be true during code execution.</p>
<p>(assuming there are no bus in your code)</p>
</blockquote>
<blockquote>
<p>An SLList with a sentinel node has at least the following invariants:</p>
<ul>
<li>The sentinel reference always points to a sentinel node.</li>
<li>The first node (if it exists), is always at sentinel.next.</li>
<li>The size variable is always the total number of items that have been added.</li>
</ul>
</blockquote>
<blockquote>
<p>Invariants make it easier to reason about code:</p>
<ul>
<li>Can assume they are true to simplify code (e.g. addLast doesn't need to worry about nulls).</li>
<li>Must ensure that methods preserve invariants.</li>
</ul>
</blockquote>
<p>这是所谓的 <strong>结构化编程中的 invariants 思想</strong></p>
<p>在这部分的体现就是，用 <code>sentinel</code>  来替代  <code>if(first == null){return;}</code> , 或者，使得先前的情况为永真。</p>
<h2 id="episode"><a class="anchor" href="#episode">#</a> Episode</h2>
<p>在 Lecture 5，教授 Josh Hug 的手机响了，有如下对话</p>
<blockquote>
<p>*rings* uh oh, my phone's ringing.</p>
<p>Hello, hi! You're in a video on the Internet forever.</p>
<p>"What? "----from the phone, confused.</p>
<p>Oh, I was recording a video for class.</p>
</blockquote>
<h1 id="lab-2"><a class="anchor" href="#lab-2">#</a> Lab 2</h1>
<h2 id="lab-2-setup"><a class="anchor" href="#lab-2-setup">#</a> Lab 2 setup</h2>
<p>这部分文档说明了在 IDEA 如何使用 pom.xml 文件打开项目。</p>
<p>在项目结构中找到库，发现它已经为我们引入了项目需要的库。</p>
<p><img loading="lazy" data-src="/pic/CS/CS61B/week2/2.webp" alt=""></p>
<p>但是，或许由于官方的教程老旧，在我以同样的方式打开 lab 2...</p>
<h2 id="oops-many-red"><a class="anchor" href="#oops-many-red">#</a> oops!!! many RED!!!</h2>
<p><img loading="lazy" data-src="/pic/CS/CS61B/week2/3.webp" alt="我死了"></p>
<p>不过好在，有人踩过这坑</p>
<details class="success"><summary>解决方法</summary><div>
<p><img loading="lazy" data-src="/pic/CS/CS61B/week2/t1.webp" alt="1"></p>
<p><img loading="lazy" data-src="/pic/CS/CS61B/week2/t2.webp" alt="2"></p>
<p><img loading="lazy" data-src="/pic/CS/CS61B/week2/t3.webp" alt="3"></p>
<p><img loading="lazy" data-src="/pic/CS/CS61B/week2/t4.webp" alt="4"></p>
<p><img loading="lazy" data-src="/pic/CS/CS61B/week2/t5.webp" alt="5"></p>
<p><img loading="lazy" data-src="/pic/CS/CS61B/week2/t6.webp" alt="6"></p>
</div></details>
<h2 id="lab-2-2"><a class="anchor" href="#lab-2-2">#</a> Lab 2</h2>
<p>Lab2 的作业内容主要了解了调试和测试。</p>
<p>这边直接给出答案。</p>
<h3 id="part-a"><a class="anchor" href="#part-a">#</a> Part A</h3>
<p>修改了 <code> while (head.next != null)</code></p>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">addConstant</span><span class="token punctuation">(</span><span class="token class-name">IntList</span> lst<span class="token punctuation">,</span> <span class="token keyword">int</span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="2"></td><td><pre>        <span class="token class-name">IntList</span> head <span class="token operator">=</span> lst<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token keyword">while</span> <span class="token punctuation">(</span>head <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="4"></td><td><pre>            head<span class="token punctuation">.</span>first <span class="token operator">+=</span> c<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>            head <span class="token operator">=</span> head<span class="token punctuation">.</span>rest<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token punctuation">}</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token punctuation">}</span></pre></td></tr></tbody></table></figure><h3 id="part-b"><a class="anchor" href="#part-b">#</a> Part B</h3>
<p>修改了 <code>while (x &gt; 10)</code></p>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> <span class="token function">firstDigitEqualsLastDigit</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="2"></td><td><pre>        <span class="token keyword">int</span> lastDigit <span class="token operator">=</span> x <span class="token operator">%</span> <span class="token number">10</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token keyword">while</span> <span class="token punctuation">(</span>x <span class="token operator">&gt;=</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="4"></td><td><pre>            x <span class="token operator">=</span> x <span class="token operator">/</span> <span class="token number">10</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token punctuation">}</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token keyword">int</span> firstDigit <span class="token operator">=</span> x <span class="token operator">%</span> <span class="token number">10</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token keyword">return</span> firstDigit <span class="token operator">==</span> lastDigit<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token punctuation">}</span></pre></td></tr></tbody></table></figure><h3 id="part-c"><a class="anchor" href="#part-c">#</a> Part C</h3>
<p>修改了 <code> currElemIsPrime ||squarePrimes(lst.rest)</code></p>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> <span class="token function">squarePrimes</span><span class="token punctuation">(</span><span class="token class-name">IntList</span> lst<span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="2"></td><td><pre>        <span class="token comment">// Base Case: we have reached the end of the list</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>lst <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="4"></td><td><pre>            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token punctuation">}</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token keyword">boolean</span> currElemIsPrime <span class="token operator">=</span> <span class="token class-name">Primes</span><span class="token punctuation">.</span><span class="token function">isPrime</span><span class="token punctuation">(</span>lst<span class="token punctuation">.</span>first<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>currElemIsPrime<span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="10"></td><td><pre>            lst<span class="token punctuation">.</span>first <span class="token operator">*=</span> lst<span class="token punctuation">.</span>first<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token punctuation">}</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token keyword">boolean</span> nextPrime <span class="token operator">=</span> <span class="token function">squarePrimes</span><span class="token punctuation">(</span>lst<span class="token punctuation">.</span>rest<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ensure recurse first</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token keyword">return</span> nextPrime <span class="token operator">||</span> currElemIsPrime<span class="token punctuation">;</span> <span class="token comment">// squarePrimes(lst.rest) || currElemIsPrime</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token punctuation">}</span></pre></td></tr></tbody></table></figure><p>在 <code>SquarePrimesTest</code>  中通过自己添加的这段测试，配合调试找出问题</p>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tbody><tr><td data-num="1"></td><td><pre><span class="token annotation punctuation">@Test</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSquarePrimeMorePrime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></td></tr><tr><td data-num="3"></td><td><pre>        <span class="token class-name">IntList</span> lst <span class="token operator">=</span> <span class="token class-name">IntList</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token keyword">boolean</span> changed <span class="token operator">=</span> <span class="token class-name">IntListExercises</span><span class="token punctuation">.</span><span class="token function">squarePrimes</span><span class="token punctuation">(</span>lst<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token string">"1 -&gt; 4 -&gt; 9"</span><span class="token punctuation">,</span> lst<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token function">assertTrue</span><span class="token punctuation">(</span>changed<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token punctuation">}</span></pre></td></tr></tbody></table></figure><h1 id="vocabulary"><a class="anchor" href="#vocabulary">#</a> VOCABULARY</h1>
<table>
<thead>
<tr>
<th style="text-align:center">词</th>
<th style="text-align:center">解释</th>
<th style="text-align:center">备注</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>assert</code></td>
<td style="text-align:center">断言</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center"><code>recursion</code></td>
<td style="text-align:center">递归</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center"><code>primitive</code></td>
<td style="text-align:center">原始的</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center"><code>parameter</code></td>
<td style="text-align:center">参数</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center"><code>sentinel</code></td>
<td style="text-align:center">哨兵</td>
<td style="text-align:center"><code>sentinel node</code>  ，就好似 <code>dummy node</code>  (哑节点)</td>
</tr>
<tr>
<td style="text-align:center"><code>invariant</code></td>
<td style="text-align:center">不变性，不变量</td>
<td style="text-align:center"></td>
</tr>
</tbody>
</table>
<div class="tags"><a href="/tags/java/" rel="tag"><i class="ic i-tag"></i>java</a><a href="/tags/CS61B/" rel="tag"><i class="ic i-tag"></i>CS61B</a><a href="/tags/learningReport/" rel="tag"><i class="ic i-tag"></i>learningReport</a></div></div><footer><div class="meta"><span class="icon"><i class="ic i-eye"></i></span><span>此文章已被阅读次数:</span><span class="waline-pageview-count" id="twikoo_visitors" data-path="CS/CS61B/CS61B-SP21-Week2-report/">正在加载...</span><span class="item"><span class="icon"><i class="ic i-calendar-check"></i></span><span class="text">更新于</span><time title="修改时间：2024-04-08 23:01:51" itemprop="dateModified" datetime="2024-04-08T23:01:51+08:00">2024-04-08</time></span></div><div id="copyright"><ul><li class="author"><strong>本文作者：</strong>cypress<i class="ic i-at"><em>@</em></i>サイプレス</li><li class="link"><strong>本文链接：</strong><a href="https://cypressen.github.io/CS/CS61B/CS61B-SP21-Week2-report/" title="[CS61B_SP21]Week2_report">https://cypressen.github.io/CS/CS61B/CS61B-SP21-Week2-report/</a></li><li class="license"><strong>版权声明：</strong>本站所有文章除特别声明外，均采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/CS/CS61B/CS61B-SP21-Week1-report/" rel="prev" itemprop="url" data-background-image="https://ooo.0x0.ooo/2024/03/17/OgUIaC.jpg" title="[CS61B_SP21]Week1_report"><span class="type">上一篇</span><span class="category"><i class="ic i-flag"></i>CS61B</span><h3>[CS61B_SP21]Week1_report</h3></a></div><div class="item right"><a href="/shokax/shokaxLog/shokax-log-4/" rel="next" itemprop="url" data-background-image="https://ooo.0x0.ooo/2024/03/29/OgXjXP.png" title="[shokax]log_4 [踩坑]本地图片部署后显示异常"><span class="type">下一篇</span><span class="category"><i class="ic i-flag"></i>shokaXlog</span><h3>[shokax]log_4 [踩坑]本地图片部署后显示异常</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#intro"><span class="toc-number">1.</span> <span class="toc-text"> Intro</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#lecture-3-testing"><span class="toc-number">2.</span> <span class="toc-text"> Lecture 3. Testing</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#junit"><span class="toc-number">2.1.</span> <span class="toc-text">  JUnit</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#tips"><span class="toc-number">2.1.1.</span> <span class="toc-text"> Tips</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#attention"><span class="toc-number">2.1.2.</span> <span class="toc-text"> ATTENTION</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#sort-testsort"><span class="toc-number">2.2.</span> <span class="toc-text">  Sort    &amp;  TestSort</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#lecture-4-references-recursion-and-lists"><span class="toc-number">3.</span> <span class="toc-text"> Lecture 4. References, Recursion, and Lists</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#mystery-of-the-walrus"><span class="toc-number">3.1.</span> <span class="toc-text"> mystery of the  Walrus</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#different-from-cpp"><span class="toc-number">3.1.1.</span> <span class="toc-text"> Different from CPP</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#cpp"><span class="toc-number">3.1.1.1.</span> <span class="toc-text"> CPP</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#java"><span class="toc-number">3.1.1.2.</span> <span class="toc-text"> Java</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#reference-type"><span class="toc-number">3.1.2.</span> <span class="toc-text"> Reference Type</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#attention-2"><span class="toc-number">3.1.2.1.</span> <span class="toc-text"> ATTENTION</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#parameter-passing"><span class="toc-number">3.1.3.</span> <span class="toc-text"> Parameter Passing</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#golden-rules-of-equals-groe"><span class="toc-number">3.1.4.</span> <span class="toc-text"> Golden Rules of Equals (GRoE)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#list"><span class="toc-number">3.2.</span> <span class="toc-text"> List</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#lecture-5-sllists-nested-classes-sentinel-nodes"><span class="toc-number">4.</span> <span class="toc-text"> Lecture 5.  SLLists, Nested Classes, Sentinel Nodes</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#a-better-way-to-write-list"><span class="toc-number">4.1.</span> <span class="toc-text"> A Better way to write list</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#step-1"><span class="toc-number">4.1.1.</span> <span class="toc-text"> Step 1</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#step-2"><span class="toc-number">4.1.2.</span> <span class="toc-text"> Step 2</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#final"><span class="toc-number">4.1.3.</span> <span class="toc-text"> Final</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sum"><span class="toc-number">4.1.4.</span> <span class="toc-text"> Sum</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#invariants"><span class="toc-number">4.2.</span> <span class="toc-text"> Invariants</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#episode"><span class="toc-number">4.3.</span> <span class="toc-text"> Episode</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#lab-2"><span class="toc-number">5.</span> <span class="toc-text"> Lab 2</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#lab-2-setup"><span class="toc-number">5.1.</span> <span class="toc-text"> Lab 2 setup</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#oops-many-red"><span class="toc-number">5.2.</span> <span class="toc-text"> oops!!! many RED!!!</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#lab-2-2"><span class="toc-number">5.3.</span> <span class="toc-text"> Lab 2</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#part-a"><span class="toc-number">5.3.1.</span> <span class="toc-text"> Part A</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#part-b"><span class="toc-number">5.3.2.</span> <span class="toc-text"> Part B</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#part-c"><span class="toc-number">5.3.3.</span> <span class="toc-text"> Part C</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#vocabulary"><span class="toc-number">6.</span> <span class="toc-text"> VOCABULARY</span></a></li></ol></div><div class="related panel pjax" data-title="系列文章"><ul><li><a href="/CS/CS61B/CS61B-SP21-Week1-report/" rel="bookmark" title="[CS61B_SP21]Week1_report">[CS61B_SP21]Week1_report</a></li><li class="active"><a href="/CS/CS61B/CS61B-SP21-Week2-report/" rel="bookmark" title="[CS61B_SP21]Week2_report">[CS61B_SP21]Week2_report</a></li><li><a href="/CS/CS61B/CS61B-SP21-Week3-report/" rel="bookmark" title="[CS61B_SP21]Week3_report">[CS61B_SP21]Week3_report</a></li><li><a href="/CS/CS61B/CS61B-SP21-Week4-report/" rel="bookmark" title="[CS61B_SP21]Week4_report">[CS61B_SP21]Week4_report</a></li></ul></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><img class="image" loading="lazy" decoding="async" itemprop="image" alt="cypress" src="/assets/avatar.webp"><p class="name" itemprop="name">cypress</p><div class="description" itemprop="description"></div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">14</span><span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">11</span><span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">11</span><span class="name">标签</span></a></div></nav><div class="social"><a target="_blank" rel="noopener" href="https://github.com/cypressen" class="item github" title="https://github.com/cypressen"><i class="ic i-github"></i></a><a href="mailto:2050038998@QQ.com" class="item email" title="mailto:2050038998@QQ.com"><i class="ic i-envelope"></i></a></div><div class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item dropdown"><a href="/about/" rel="section"><i class="ic i-user"></i>关于</a><ul class="submenu"><li class="item"><a href="/settings/" rel="section"><i class="ic i-heart"></i>设定簇</a></li></ul></li><li class="item dropdown"><a href="#" onclick="return false;"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li></div></div></div></div><ul id="quick"><li class="prev pjax"><a href="/shokax/shokaxLog/shokax-log-4/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/CS/CS61B/CS61B-SP21-Week1-report/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>最新评论</h2><ul class="leancloud-recent-comment" id="new-comment"></ul></div></div><div class="status"><div class="copyright">© 2024 -<span itemprop="copyrightYear">2024</span><span class="with-love"><i class="ic i-sakura rotate"></i></span><span class="author" itemprop="copyrightHolder">cypress @ cypress</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i></span><span title="站点总字数">94k 字</span><span class="post-meta-divider"> | </span><span class="post-meta-item-icon"><i class="ic i-coffee"></i></span><span title="站点阅读时长">1:26</span></div><div class="powered-by">基于 <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a> &amp; Theme.<a target="_blank" rel="noopener" href="https://github.com/theme-shoka-x/hexo-theme-shokaX/">ShokaX</a></div></div></div></footer></div><script data-config="" type="text/javascript">var LOCAL = {
    ispost: true,
        path: `CS/CS61B/CS61B-SP21-Week2-report/`,
        favicon: {
        show: `サイプレス`,
        hide: `cypress`
    },
    search: {
        placeholder: "文章搜索",
        empty: "关于 「 ${query} 」，什么也没搜到",
        stats: "${time} ms 内找到 ${hits} 条结果"
    },
    copy_tex: false,
    katex: false,
    mermaid: false,
    audio: undefined,
    fancybox: true,
    nocopy: false,
    outime: true,
    template: `<div class="note warning"><p><span class="label warning">文章时效性提示</span><br>这是一篇发布于 {{publish}} 天前，最后一次更新在 {{updated}} 天前的文章，部分信息可能已经发生改变，请注意甄别。</p></div>`,
    quiz: {
        choice: `单选题`,
        multiple: `多选题`,
        true_false: `判断题`,
        essay: `问答题`,
        gap_fill: `填空题`,
        mistake: `错题备注`
    },
    ignores: [
        (uri) => uri.includes('#'),
        (uri) => new RegExp(LOCAL.path + '$').test(uri),
            []
    ]
};
</script><script>(function(c,l,a,r,i,t,y){
    c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
    t=l.createElement(r);t.async=true;t.src="https://www.clarity.ms/tag/"+i;
    y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
})(window, document, "clarity", "script", "true");</script><script async="async" src="https://www.googletagmanager.com/gtag/js?id=true"></script><script data-pjax="data-pjax">window.dataLayer = window.dataLayer || [];
function gtag() {
    dataLayer.push(arguments);
}
gtag('js', new Date());
gtag('config', 'true');</script><script src="https://lf9-cdn-tos.bytecdntp.com/cdn/expire-6-M/pace/1.2.4/pace.min.js" async=""></script><script src="/js/siteInit.js?v=0.4.2" type="module" fetchpriority="high" defer=""></script><script async>window.onload=function(){var a=document.createElement('script'),b=document.getElementsByTagName('script')[0];a.type='text/javascript',a.async=!0,a.src='/sw-register.js?v='+Date.now(),b.parentNode.insertBefore(a,b)};</script></body></html>